"use-strict";var movieFinderApp=function(){function a(a){var e="",t=a,n,s;v=[],$(".pagination").html(""),e+='<li class="page-item previous disabled">',e+='<a class="page-link" href="#" aria-label="Previous">',e+='<span aria-label="true">&laquo;</span>',e+='<span class="sr-only">Previous</span>',e+="</a></li>";for(var i=0;i<t;i++)i<5&&(e+='<li class="page-item number">',e+='<a class="page-link page-number" href="#">',e+=i+1,e+="</a></li>"),v.push(i);v.length<5?e+='<li class="page-item next disabled">':e+='<li class="page-item next">',e+='<a class="page-link" href="#" aria-label="Next">',e+='<span aria-label="true">&raquo;</span>',e+='<span class="sr-only">Next</span>',e+="</a></li>",$(".pagination").html(e),$(".pagination .number").eq(0).addClass("active"),b.show("fast"),n=$("#pagination-links").css("width"),s=parseInt(n)/2,b.css({"margin-left":"-"+s.toString()+"px"})}function e(a){return Math.ceil(a/10)}function t(){var a=$(".number a"),e=v.length,t;if(e<6)return!1;if(parseInt($(".number").last().children().html())===e)return $(".next").hasClass("disabled")||$(".next").addClass("disabled"),!1;for(var n=0;n<a.length;n++){t=parseInt(a.eq(n).html()),t++;var s=t.toString();a.eq(n).html(s)}g++,$(".previous").hasClass("disabled")&&$(".previous").removeClass("disabled")}function n(){var a=$(".number a"),e,t=$(".previous");if(1===parseInt($(".number").first().children().html()))return t.hasClass("disabled")||t.addClass("disabled"),!1;for(var n=0;n<a.length;n++){e=parseInt(a.eq(n).html()),e--;var s=e.toString();a.eq(n).html(s)}g--}function s(){return parseInt($(".number.active").children().html())}function i(t,n){var s=t.Search,i=t.Response,l=t.totalResults,r=e(l),o="";d=[],"True"===i?($.each(s,function(a,e){d.push(e.imdbID),o+="<li>",o+='<div class="poster-wrap">',"N/A"===e.Poster?(o+='<i class="material-icons poster-placeholder">',o+="crop_original",o+="</i>"):(o+='<img class="movie-poster" src=',o+=e.Poster+">"),o+="</div>",o+='<span class="movie-title">',o+=e.Title,o+="</span>",o+='<span class="movie-year">',o+=e.Year,o+="</span>",o+="</li>"}),p.html(o),k||(a(r),k=!0)):(o+='<li class="no-movies">',o+='<i class="material-icons icon-help">',o+="help_outline",o+="</i>No movies found that match: "+n+".",o+="</li>",p.html(o))}function l(a){var e=a.Title,t=a.imdbRating,n=a.Poster,s=a.Plot,i=a.tomatoURL,l=$(".desc-content-area h1"),o=$(".imdb-rating"),c=$(".desc-content-area p").eq(1),u=$(".imdb-button"),p=$(".desc-image");l.html(e),o.html("IMDB Rating: "+t),c.html(s),u.attr("href",i),p.attr("src",n),r()}function r(){$(".main-content").toggleClass("on-screen"),$(".desc-content").toggleClass("on-screen")}function o(a){var e=m.val(),t=h.val(),n={s:e,y:t,r:"json",tomatoes:!0,page:a};$.ajax({url:f,data:n,method:"GET",success:function(a){i(a,e)}})}function c(a){var e={i:a,plot:"Full",r:"json",tomatoes:!0};$.ajax({url:f,data:e,method:"GET",success:function(a){l(a)}})}function u(a){for(var e=a.target.closest("li"),t=$("#movies li"),n=0,s=0;s<t.length&&t[s]!==e;s++)n++;return n}var p=$("#movies"),m=$("#search"),h=$("#year"),d=[],v,f="http://www.omdbapi.com/?i=tt3896198&apikey=9bffe1d3",g=1,b=$("#pagination-links"),k=!1;p.on("click","li",function(a){var e=u(a);c(d[e]),$("#pagination-links").fadeOut("fast")}),$("#submit").click(function(a){k=!1,$(".desc-content").hasClass("on-screen")&&r(),o(1),a.preventDefault()}),$(".back-results span").click(function(){r(),$("#pagination-links").fadeIn("slow")}),b.on("click",".page-number",function(){$(".number").removeClass("active"),$(this).closest(".number").addClass("active");var a=parseInt($(this).html());g=a,o(a)}),b.on("click",".previous",function(){n();var a=s();if(1===parseInt($(".number").first().children().html()))return!1;o(a)}),b.on("click",".next",function(){t();var a=s();if(parseInt($(".number").last().children().html())===v.length)return!1;o(a)}),b.hide()};movieFinderApp();